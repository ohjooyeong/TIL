# 호이스팅

-   호이스팅은 보통 코드를 실행하기 전 함수의 선언과 변수의 선언을 파일의 맨 위로 끌어올린다고 알고 있지만 정확히는 "아니다"
-   JS 엔진은 스크립트를 가져오면 가장 먼저 코드에서 데이터를 위한 메모리를 설정한다. 이 시점에는 코드가 실행되는 않고 실행을 하기 위한 준비단계이다.
-   MDN 정의에 의하면 **호이스팅** 이란, **인터프리터가 변수와 함수의 메모리 공간을 선언 전에 미리 할당하는 것** 을 의미합니다.
-   함수와 변수가 메모리에 저장되는 방식은 다르다.
    -   함수는 전체 함수에 대한 참조와 함께 저장된다.
    -   변수의 경우 ES6 문법인 let과 const는 초기화되지 않은 채로 저장이 되고, var는 undefined로 저장이 된다.

```javascript
console.log(sum(2, 3));
console.log(name);
console.log(age);

function sum(x, y) {
    return x + y;
}

const name = "hoo00nn";

var age = 25;
```

## 어떻게 동작할까 ?

```
먼저 첫 번째 console.log를 살펴보겠다.
함수는 전체 함수의 대한 참조와 함께 메모리에 저장되기 때문에 함수를 만든 라인 이전에도 호출할 수 있다.

두 번째 console.log를 보겠다.
const는 초기화되지 않은 채로 메모리에 저장이 되기 때문에 초기화 전에 변수를 참조할 수 없다는 ReferenceError 가 발생한다.

세 번째 var의 경우를 보겠다.
var는 undefined 형태로 메모리에 저장이 되기 때문에 undefined가 콘솔에 찍힌다.
```

## 요약

-   함수와 변수는 코드를 실행하기 전에 실행 컨텍스트를 위해 메모리에 저장된다.
-   함수는 전체 함수에 대한 참조와 함께 저장되고, var 키워드가 있는 변수는 undefined, let 및 const 키워드가 있는 변수는 초기화되지 않은 상태로 메모리에 저장된다.

## 결론

호이스팅 메커니즘을 적절히 이해하는 것은 호이스팅에 의해 발생하는 잠재적 버그와 혼란을 피하도록 도와준다.
undefined나 reference error와 같이 호이스팅의 사이드 이펙트(Side Effect)를 피하기 위해서는 항상 변수를 현재 스코프 최상단에서 선언하도록 하고, 선언과 함께 초기화를 해줘야 한다.
